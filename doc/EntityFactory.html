<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class EntityFactory - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-ai_player">::ai_player</a>
    
    <li ><a href="#method-c-artillery">::artillery</a>
    
    <li ><a href="#method-c-command_bunker">::command_bunker</a>
    
    <li ><a href="#method-c-create_army">::create_army</a>
    
    <li ><a href="#method-c-create_board_basic">::create_board_basic</a>
    
    <li ><a href="#method-c-create_game">::create_game</a>
    
    <li ><a href="#method-c-create_game_basic">::create_game_basic</a>
    
    <li ><a href="#method-c-flatland_square">::flatland_square</a>
    
    <li ><a href="#method-c-goliath">::goliath</a>
    
    <li ><a href="#method-c-hill_square">::hill_square</a>
    
    <li ><a href="#method-c-human_player">::human_player</a>
    
    <li ><a href="#method-c-infantry">::infantry</a>
    
    <li ><a href="#method-c-machine_gun">::machine_gun</a>
    
    <li ><a href="#method-c-mountain_square">::mountain_square</a>
    
    <li ><a href="#method-c-place_army_bottom_left">::place_army_bottom_left</a>
    
    <li ><a href="#method-c-place_army_bottom_right">::place_army_bottom_right</a>
    
    <li ><a href="#method-c-place_army_bottom_right_demo">::place_army_bottom_right_demo</a>
    
    <li ><a href="#method-c-place_army_top_left">::place_army_top_left</a>
    
    <li ><a href="#method-c-place_army_top_left_demo">::place_army_top_left_demo</a>
    
    <li ><a href="#method-c-place_army_top_right">::place_army_top_right</a>
    
    <li ><a href="#method-c-place_piece">::place_piece</a>
    
    <li ><a href="#method-c-river_square">::river_square</a>
    
    <li ><a href="#method-c-trench_square">::trench_square</a>
    
    <li ><a href="#method-c-turn_entity">::turn_entity</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-EntityFactory">
  <h1 id="class-EntityFactory" class="class">
    class EntityFactory
  </h1>

  <section class="description">
    
<p>The <a href="EntityFactory.html">EntityFactory</a> is a heavy-lifter along
with the <a href="EntityManager.html">EntityManager</a>. It is responsible
for creating standard entities. Certain entities such as squares on the
board are rather forumlaic in how they are made. Rather than having to add
the appropriate components manually each time, the <a
href="EntityFactory.html">EntityFactory</a> handles this logic. The factory
also provides methods to determine whether an entity is of a given type
(like a Square or Player).</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-ai_player" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ai_player</span><span
            class="method-args">(entity_manager, name, id=-1, channel="", gravatar="", faction="blue")</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new AI player entity. These entities represent the
players that are controlled by artifical intelligence</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">name</span>           = <span class="ruby-identifier">the</span> <span class="ruby-identifier">name</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">computer</span> <span class="ruby-identifier">entity</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">AI</span> <span class="ruby-constant">Player</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="ai_player-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">ai_player</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">id</span>=<span class="ruby-value">-1</span>, <span class="ruby-identifier">channel</span>=<span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">gravatar</span>=<span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">faction</span>=<span class="ruby-string">&quot;blue&quot;</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">UserIdComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">channel</span>, <span class="ruby-identifier">gravatar</span>, <span class="ruby-identifier">faction</span>),
                                   <span class="ruby-constant">NameComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>),
                                   <span class="ruby-constant">AIComponent</span>.<span class="ruby-identifier">new</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-artillery" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">artillery</span><span
            class="method-args">(entity_manager, owner)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new AI player etity. These entities represent the
players that are controlled by artifical intelligence</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">owner</span>          = <span class="ruby-identifier">the</span> <span class="ruby-identifier">player</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">this</span> <span class="ruby-identifier">piece</span> <span class="ruby-identifier">belongs</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">AI</span> <span class="ruby-constant">Player</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="artillery-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 257</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">artillery</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">PieceComponent</span>.<span class="ruby-identifier">artillery</span>,
                                   <span class="ruby-constant">HealthComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">12</span>),
                                   <span class="ruby-constant">EnergyComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">6</span>),
                                   <span class="ruby-constant">MotionComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">-1</span>, <span class="ruby-value">6</span>),
                                   <span class="ruby-constant">RangeAttackComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">12</span>, <span class="ruby-value">3</span>, <span class="ruby-value">10</span>, [<span class="ruby-value">1.0</span>, <span class="ruby-value">0.5</span>, <span class="ruby-value">0.25</span>], <span class="ruby-value">6</span>),
                                   <span class="ruby-constant">OwnedComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">owner</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-command_bunker" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">command_bunker</span><span
            class="method-args">(entity_manager, owner)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new command bunker entity. These entities represent
the command base of a player. A player will lose if the opposing army is
able to capture the command bunker.</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">owner</span>          = <span class="ruby-identifier">the</span> <span class="ruby-identifier">player</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">this</span> <span class="ruby-identifier">piece</span> <span class="ruby-identifier">belongs</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Command</span> <span class="ruby-constant">Bunker</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="command_bunker-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">command_bunker</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">PieceComponent</span>.<span class="ruby-identifier">command_bunker</span>,
                                   <span class="ruby-constant">HealthComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">30</span>),
                                   <span class="ruby-constant">EnergyComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">10</span>),
                                   <span class="ruby-constant">RangeAttackImmunityComponent</span>.<span class="ruby-identifier">new</span>,
                                   <span class="ruby-constant">OwnedComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">owner</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-create_army" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_army</span><span
            class="method-args">(entity_manager, owner)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new army for a player.</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">owner</span>          = <span class="ruby-identifier">the</span> <span class="ruby-identifier">player</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">that</span> <span class="ruby-identifier">owns</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">an</span> <span class="ruby-identifier">array</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">pieces</span>
</pre>
          
          

          
          <div class="method-source-code" id="create_army-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_army</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)
        <span class="ruby-identifier">army_array</span> = []
        <span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">command_bunker</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)
        <span class="ruby-value">3</span>.<span class="ruby-identifier">times</span>  {<span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">artillery</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)}
        <span class="ruby-value">7</span>.<span class="ruby-identifier">times</span>  {<span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">machine_gun</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)}
        <span class="ruby-value">14</span>.<span class="ruby-identifier">times</span> {<span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">infantry</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)}
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">army_array</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-create_board_basic" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_board_basic</span><span
            class="method-args">(entity_manager)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function populates the board in the most basic way possible. It fills
each row and column with a flatland square.</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
</pre>

<p>Postcondition</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">properly</span> <span class="ruby-identifier">created</span>
</pre>

<p>Note</p>

<pre class="ruby"><span class="ruby-constant">Each</span>
</pre>
          
          

          
          <div class="method-source-code" id="create_board_basic-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_board_basic</span>(<span class="ruby-identifier">entity_manager</span>)
        (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">row</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">col</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-identifier">square</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">flatland_square</span>(<span class="ruby-identifier">entity_manager</span>)
                        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">add_component</span>(<span class="ruby-identifier">square</span>,
                                <span class="ruby-constant">PositionComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>))
                        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">board</span>[<span class="ruby-identifier">row</span>][<span class="ruby-identifier">col</span>] = [<span class="ruby-identifier">square</span>, []]
                }
        }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-create_game" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_game</span><span
            class="method-args">(entity_manager, users, terrainIds, pieceIds)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="create_game-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 458</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_game</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">users</span>, <span class="ruby-identifier">terrainIds</span>, <span class="ruby-identifier">pieceIds</span>)
        <span class="ruby-identifier">rows</span> = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">row</span>
        <span class="ruby-identifier">cols</span> = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">col</span>
        
        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">flatland_square</span>(<span class="ruby-identifier">entity_manager</span>)
        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mountain_square</span>(<span class="ruby-identifier">entity_manager</span>)
        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hill_square</span>(<span class="ruby-identifier">entity_manager</span>)
        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">trench_square</span>(<span class="ruby-identifier">entity_manager</span>)
        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">river_square</span>(<span class="ruby-identifier">entity_manager</span>)

        <span class="ruby-comment"># Board</span>
        <span class="ruby-identifier">flatland</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">flatland_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>) }
        <span class="ruby-identifier">mountain</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mountain_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>) }
        <span class="ruby-identifier">hill</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hill_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>) }
        <span class="ruby-identifier">trench</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">trench_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>) }
        <span class="ruby-identifier">river</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">river_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>) }

        <span class="ruby-identifier">terrainCreator</span> = {}
        <span class="ruby-identifier">terrainCreator</span>.<span class="ruby-identifier">default</span> = <span class="ruby-identifier">flatland</span>
        [<span class="ruby-value">-1</span>, <span class="ruby-value">68</span>, <span class="ruby-value">67</span>, <span class="ruby-value">99</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">terrainCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">flatland</span> }
        [<span class="ruby-value">-2</span>, <span class="ruby-value">567</span>, <span class="ruby-value">750</span>, <span class="ruby-value">751</span>, <span class="ruby-value">683</span>, <span class="ruby-value">546</span>, <span class="ruby-value">385</span>, <span class="ruby-value">353</span>, <span class="ruby-value">387</span>, <span class="ruby-value">619</span>, <span class="ruby-value">481</span>, <span class="ruby-value">583</span>, <span class="ruby-value">461</span>, <span class="ruby-value">578</span>, 
         <span class="ruby-value">453</span>, <span class="ruby-value">385</span>, <span class="ruby-value">560</span>, <span class="ruby-value">491</span>, <span class="ruby-value">551</span>, <span class="ruby-value">618</span>, <span class="ruby-value">554</span>, <span class="ruby-value">681</span>, <span class="ruby-value">745</span>, <span class="ruby-value">712</span>, <span class="ruby-value">627</span>, <span class="ruby-value">680</span>, <span class="ruby-value">464</span>, <span class="ruby-value">588</span>, 
         <span class="ruby-value">595</span>, <span class="ruby-value">782</span>, <span class="ruby-value">522</span>, <span class="ruby-value">427</span>, <span class="ruby-value">582</span>, <span class="ruby-value">614</span>, <span class="ruby-value">780</span>, <span class="ruby-value">747</span>, <span class="ruby-value">522</span>, <span class="ruby-value">427</span>, <span class="ruby-value">466</span>, <span class="ruby-value">433</span>, <span class="ruby-value">593</span>, <span class="ruby-value">213</span>, 
         <span class="ruby-value">53</span>, <span class="ruby-value">57</span>, <span class="ruby-value">221</span>, <span class="ruby-value">55</span>, <span class="ruby-value">125</span>, <span class="ruby-value">21</span>, <span class="ruby-value">123</span>, <span class="ruby-value">91</span>, <span class="ruby-value">21</span>, <span class="ruby-value">53</span>, <span class="ruby-value">25</span>, <span class="ruby-value">40</span>, <span class="ruby-value">509</span>, <span class="ruby-value">380</span>, <span class="ruby-value">381</span>, <span class="ruby-value">382</span>, 
         <span class="ruby-value">507</span>, <span class="ruby-value">383</span>, <span class="ruby-value">508</span>, <span class="ruby-value">470</span>, <span class="ruby-value">380</span>, <span class="ruby-value">509</span>, <span class="ruby-value">472</span>, <span class="ruby-value">508</span>, <span class="ruby-value">474</span>, <span class="ruby-value">509</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> 
              <span class="ruby-identifier">terrainCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">mountain</span>
        }
        [<span class="ruby-value">-3</span>, <span class="ruby-value">685</span>, <span class="ruby-value">686</span>, <span class="ruby-value">653</span>, <span class="ruby-value">685</span>, <span class="ruby-value">654</span>, <span class="ruby-value">655</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">terrainCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">hill</span> }
        [<span class="ruby-value">-4</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">terrainCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">trench</span> }
        [<span class="ruby-value">-5</span>, <span class="ruby-value">631</span>, <span class="ruby-value">636</span>, <span class="ruby-value">632</span>, <span class="ruby-value">635</span>, <span class="ruby-value">636</span>, <span class="ruby-value">603</span>, <span class="ruby-value">604</span>, <span class="ruby-value">599</span>, <span class="ruby-value">539</span>, <span class="ruby-value">631</span>, <span class="ruby-value">629</span>, <span class="ruby-value">635</span>, <span class="ruby-value">573</span>, 
         <span class="ruby-value">597</span>, <span class="ruby-value">630</span>, <span class="ruby-value">571</span>, <span class="ruby-value">600</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> 
                <span class="ruby-identifier">terrainCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">river</span> 
        }

        (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">rows</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">cols</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-identifier">id</span> = <span class="ruby-identifier">terrainIds</span>[<span class="ruby-identifier">row</span><span class="ruby-operator">*</span><span class="ruby-identifier">cols</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">col</span>]
                        <span class="ruby-identifier">square</span> = <span class="ruby-identifier">terrainCreator</span>[<span class="ruby-identifier">id</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">id</span>)
                        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">add_component</span>(<span class="ruby-identifier">square</span>,
                                        <span class="ruby-constant">PositionComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>))
                        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">board</span>[<span class="ruby-identifier">row</span>][<span class="ruby-identifier">col</span>] = [<span class="ruby-identifier">square</span>, []]
                }
        }

        <span class="ruby-comment"># Players</span>
        <span class="ruby-identifier">players</span> = []

        <span class="ruby-identifier">factions</span> = [<span class="ruby-string">&quot;red&quot;</span>, <span class="ruby-string">&quot;blue&quot;</span>, <span class="ruby-string">&quot;green&quot;</span>, <span class="ruby-string">&quot;yellow&quot;</span>]

        <span class="ruby-identifier">users</span>.<span class="ruby-identifier">each_with_index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">user</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">player</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">human_player</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span>, 
                                           <span class="ruby-identifier">user</span>.<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">user</span>.<span class="ruby-identifier">gravatar</span>, <span class="ruby-identifier">factions</span>[<span class="ruby-identifier">index</span>])
                <span class="ruby-identifier">players</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">player</span>
        }

        <span class="ruby-comment"># Turn</span>
        <span class="ruby-identifier">turn</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">turn_entity</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">players</span>)

        <span class="ruby-comment"># Pieces</span>
        <span class="ruby-identifier">i</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">player</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">infantry</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">player</span>) }
        <span class="ruby-identifier">m</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">player</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">machine_gun</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">player</span>) }
        <span class="ruby-identifier">a</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">player</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">artillery</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">player</span>) }
        <span class="ruby-identifier">b</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">player</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">command_bunker</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">player</span>) }

        <span class="ruby-identifier">pieceCreator</span> = {}
        [<span class="ruby-value">-10</span>, <span class="ruby-value">1095</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">i</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">0</span>]] } }
        [<span class="ruby-value">-11</span>, <span class="ruby-value">1123</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">m</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">0</span>]] } }
        [<span class="ruby-value">-12</span>, <span class="ruby-value">1039</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">a</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">0</span>]] } }
        [<span class="ruby-value">-13</span>, <span class="ruby-value">1067</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">b</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">0</span>]] } }
        [<span class="ruby-value">-20</span>, <span class="ruby-value">1081</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">i</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">1</span>]] } }
        [<span class="ruby-value">-21</span>, <span class="ruby-value">1109</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">m</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">1</span>]] } }
        [<span class="ruby-value">-22</span>, <span class="ruby-value">1025</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">a</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">1</span>]] } }
        [<span class="ruby-value">-23</span>, <span class="ruby-value">1053</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">b</span>[<span class="ruby-identifier">players</span>[<span class="ruby-value">1</span>]] } }

        <span class="ruby-identifier">pieces</span> = []
        (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">rows</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">cols</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-identifier">unit</span> = <span class="ruby-identifier">pieceCreator</span>[<span class="ruby-identifier">pieceIds</span>[<span class="ruby-identifier">row</span><span class="ruby-operator">*</span><span class="ruby-identifier">cols</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">col</span>]]

                        <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">unit</span>.<span class="ruby-identifier">nil?</span>

                        <span class="ruby-identifier">pieces</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">unit</span>.<span class="ruby-identifier">call</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">pieces</span>[<span class="ruby-value">-1</span>], <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
                }
        }

        <span class="ruby-keyword">return</span> <span class="ruby-identifier">entity_manager</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-create_game_basic" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_game_basic</span><span
            class="method-args">(entity_manager, users)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates all the entities needed for a new basic game</p>

<p>Arguments</p>

<pre>entity_manager = the entity manager to add the new entities to
users          = map of player ids =&gt; names (max 4)</pre>

<p>Returns</p>

<pre>an array of the following entities:

[turn_entity, 
 [player_entity1, player_entity2, ...],
 [piece_entity1, piece_entity2, piece_entity3, ....]
]</pre>

<p>Note</p>

<pre>it is the responsiblity of the caller to make sure
number_of_players &lt;= 4

The basic game uses a plain board only with flatlands  

When initializing a new game, this is the only method that needs
to be called.</pre>
          
          

          
          <div class="method-source-code" id="create_game_basic-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 434</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_game_basic</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">users</span>)
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_board_basic</span>(<span class="ruby-identifier">entity_manager</span>)
        
        <span class="ruby-identifier">place_methods</span> = [<span class="ruby-constant">EntityFactory</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:place_army_top_left</span>),
                         <span class="ruby-constant">EntityFactory</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:place_army_bottom_right</span>),
                         <span class="ruby-constant">EntityFactory</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:place_army_top_right</span>),
                         <span class="ruby-constant">EntityFactory</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:place_army_bottom_left</span>)]
        
        <span class="ruby-identifier">players</span> = []
        <span class="ruby-identifier">pieces</span> = []
        <span class="ruby-identifier">factions</span> = [<span class="ruby-string">&quot;red&quot;</span>, <span class="ruby-string">&quot;blue&quot;</span>, <span class="ruby-string">&quot;green&quot;</span>, <span class="ruby-string">&quot;yellow&quot;</span>]

        <span class="ruby-identifier">users</span>.<span class="ruby-identifier">each_with_index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">user</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">player</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">human_player</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">user</span>.<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">factions</span>[<span class="ruby-identifier">index</span>])
                <span class="ruby-identifier">army</span>   = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_army</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">player</span>)
                <span class="ruby-identifier">players</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">player</span>
                <span class="ruby-identifier">pieces</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">army</span>
                <span class="ruby-identifier">place_methods</span>[<span class="ruby-identifier">index</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army</span>)
        }
        
        <span class="ruby-identifier">turn</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">turn_entity</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">players</span>)
        <span class="ruby-keyword">return</span> [<span class="ruby-identifier">players</span>, <span class="ruby-identifier">turn</span>, <span class="ruby-identifier">pieces</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-flatland_square" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">flatland_square</span><span
            class="method-args">(entity_manager, id=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new flatland square for boards. Flatlands are the
standard squares that can both be traversed by troops and occupied by them.</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Square</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="flatland_square-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">flatland_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>=<span class="ruby-value">0</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">TerrainComponent</span>.<span class="ruby-identifier">flatland</span>,
                                   <span class="ruby-constant">OccupiableComponent</span>.<span class="ruby-identifier">new</span>,
                                   <span class="ruby-constant">SpriteComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-goliath" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">goliath</span><span
            class="method-args">(entity_manager, owner)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>;)</p>
          
          

          
          <div class="method-source-code" id="goliath-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 197</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">goliath</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">PieceComponent</span>.<span class="ruby-identifier">infantry</span>,
                                   <span class="ruby-constant">HealthComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">36</span>),
                                   <span class="ruby-constant">MotionComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">-1</span>, <span class="ruby-value">1</span>),
                                   <span class="ruby-constant">MeleeAttackComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">9</span>),
                                   <span class="ruby-constant">EnergyComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>),
                                   <span class="ruby-constant">OwnedComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">owner</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-hill_square" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hill_square</span><span
            class="method-args">(entity_manager, id=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new hill square for boards. Hills are the passable
and occupiable version of mountians.</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Square</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="hill_square-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hill_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>=<span class="ruby-value">0</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">TerrainComponent</span>.<span class="ruby-identifier">hill</span>,
                                   <span class="ruby-constant">OccupiableComponent</span>.<span class="ruby-identifier">new</span>,
                                   <span class="ruby-constant">BoostComponent</span>.<span class="ruby-identifier">defense</span>,
                                   <span class="ruby-constant">BoostComponent</span>.<span class="ruby-identifier">move_cost</span>,
                                   <span class="ruby-constant">SpriteComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-human_player" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">human_player</span><span
            class="method-args">(entity_manager, name, id=-1, channel="", gravatar="", faction="blue")</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new human player entity. These entities represent
the human players of the game.</p>

<p>Arguments</p>

<pre>entity_manager = the entity manager to add the new entity to
name           = the in game name of the player</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Human</span> <span class="ruby-constant">Player</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="human_player-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 157</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">human_player</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">id</span>=<span class="ruby-value">-1</span>, <span class="ruby-identifier">channel</span>=<span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">gravatar</span>=<span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">faction</span>=<span class="ruby-string">&quot;blue&quot;</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">UserIdComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">channel</span>, <span class="ruby-identifier">gravatar</span>, <span class="ruby-identifier">faction</span>),
                                   <span class="ruby-constant">NameComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>),
                                   <span class="ruby-constant">HumanComponent</span>.<span class="ruby-identifier">new</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-infantry" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">infantry</span><span
            class="method-args">(entity_manager, owner)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new AI player etity. These entities represent the
players that are controlled by artifical intelligence</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">owner</span>          = <span class="ruby-identifier">the</span> <span class="ruby-identifier">player</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">this</span> <span class="ruby-identifier">piece</span> <span class="ruby-identifier">belongs</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">AI</span> <span class="ruby-constant">Player</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="infantry-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">infantry</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">PieceComponent</span>.<span class="ruby-identifier">infantry</span>,
                                   <span class="ruby-constant">HealthComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">12</span>),
                                   <span class="ruby-constant">EnergyComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">18</span>),
                                   <span class="ruby-constant">MotionComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">-1</span>, <span class="ruby-value">2</span>),
                                   <span class="ruby-constant">MeleeAttackComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">6</span>, <span class="ruby-value">4</span>),
                                   <span class="ruby-constant">RangeAttackComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">6</span>, <span class="ruby-value">1</span>, <span class="ruby-value">2</span>, [<span class="ruby-value">1.0</span>], <span class="ruby-value">4</span>),
                                   <span class="ruby-constant">TrenchBuilderComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">4</span>),
                                   <span class="ruby-constant">OwnedComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">owner</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-machine_gun" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">machine_gun</span><span
            class="method-args">(entity_manager, owner)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new AI player etity. These entities represent the
players that are controlled by artifical intelligence</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">owner</span>          = <span class="ruby-identifier">the</span> <span class="ruby-identifier">player</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">this</span> <span class="ruby-identifier">piece</span> <span class="ruby-identifier">belongs</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">AI</span> <span class="ruby-constant">Player</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="machine_gun-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">machine_gun</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">owner</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">PieceComponent</span>.<span class="ruby-identifier">machine_gun</span>,
                                   <span class="ruby-constant">HealthComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">12</span>),
                                   <span class="ruby-constant">EnergyComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">30</span>),
                                   <span class="ruby-constant">MotionComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">-1</span>, <span class="ruby-value">3</span>),
                                   <span class="ruby-constant">MeleeAttackComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">6</span>, <span class="ruby-value">6</span>),
                                   <span class="ruby-constant">RangeAttackComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">4</span>, <span class="ruby-value">1</span>, <span class="ruby-value">3</span>, [<span class="ruby-value">1.0</span>], <span class="ruby-value">2</span>),
                                   <span class="ruby-constant">OwnedComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">owner</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-mountain_square" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mountain_square</span><span
            class="method-args">(entity_manager, id=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new mountain square for boards. Mountains are
rugged squares that are unoccupiable and impassable. They primarly serve as
protective boarders.</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Square</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="mountain_square-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mountain_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>=<span class="ruby-value">0</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">TerrainComponent</span>.<span class="ruby-identifier">mountain</span>,
                                   <span class="ruby-constant">ImpassableComponent</span>.<span class="ruby-identifier">new</span>,
                                   <span class="ruby-constant">SpriteComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-place_army_bottom_left" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_army_bottom_left</span><span
            class="method-args">(entity_manager, army_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function places an army in the 5x5 bottom left corner</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">army_array</span>     = <span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">place</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>

<p>Postcondition</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">has</span> <span class="ruby-identifier">been</span> <span class="ruby-identifier">placed</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>
          
          

          
          <div class="method-source-code" id="place_army_bottom_left-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 353</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_army_bottom_left</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army_array</span>)
        <span class="ruby-identifier">army</span> = <span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">dup</span>
        <span class="ruby-identifier">max_row</span>  = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">row</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">max_row</span>.<span class="ruby-identifier">step</span>(<span class="ruby-identifier">max_row</span><span class="ruby-operator">-</span><span class="ruby-value">4</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">5</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
                }
        }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-place_army_bottom_right" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_army_bottom_right</span><span
            class="method-args">(entity_manager, army_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function places an army in the 5x5 bottom right corner</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">army_array</span>     = <span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">place</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>

<p>Postcondition</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">has</span> <span class="ruby-identifier">been</span> <span class="ruby-identifier">placed</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>
          
          

          
          <div class="method-source-code" id="place_army_bottom_right-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_army_bottom_right</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army_array</span>)
        <span class="ruby-identifier">army</span>    = <span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">dup</span>
        <span class="ruby-identifier">max_row</span>  = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">row</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">max_col</span> = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">col</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">max_row</span>.<span class="ruby-identifier">step</span>(<span class="ruby-identifier">max_row</span><span class="ruby-operator">-</span><span class="ruby-value">4</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">max_col</span>.<span class="ruby-identifier">step</span>(<span class="ruby-identifier">max_col</span><span class="ruby-operator">-</span><span class="ruby-value">4</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
                }
        }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-place_army_bottom_right_demo" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_army_bottom_right_demo</span><span
            class="method-args">(entity_manager, army_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="place_army_bottom_right_demo-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 401</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_army_bottom_right_demo</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army_array</span>)
        <span class="ruby-identifier">army</span>    = <span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">dup</span>
        <span class="ruby-identifier">max_row</span>  = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">row</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">max_col</span> = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">col</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        (<span class="ruby-identifier">max_row</span><span class="ruby-operator">-</span><span class="ruby-value">5</span>).<span class="ruby-identifier">step</span>(<span class="ruby-identifier">max_row</span><span class="ruby-operator">-</span><span class="ruby-value">9</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                (<span class="ruby-identifier">max_col</span><span class="ruby-operator">-</span><span class="ruby-value">5</span>).<span class="ruby-identifier">step</span>(<span class="ruby-identifier">max_col</span><span class="ruby-operator">-</span><span class="ruby-value">9</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
                }
        }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-place_army_top_left" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_army_top_left</span><span
            class="method-args">(entity_manager, army_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function places an army in the 5x5 top left corner</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">army_array</span>     = <span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">place</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>

<p>Postcondition</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">has</span> <span class="ruby-identifier">been</span> <span class="ruby-identifier">placed</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>
          
          

          
          <div class="method-source-code" id="place_army_top_left-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 327</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_army_top_left</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army_array</span>)
        <span class="ruby-identifier">army</span> = <span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">dup</span>
        (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">5</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">5</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
                }
        }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-place_army_top_left_demo" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_army_top_left_demo</span><span
            class="method-args">(entity_manager, army_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="place_army_top_left_demo-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 336</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_army_top_left_demo</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army_array</span>)
        <span class="ruby-identifier">army</span> = <span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">dup</span>
        (<span class="ruby-value">5</span><span class="ruby-operator">...</span><span class="ruby-value">10</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                (<span class="ruby-value">5</span><span class="ruby-operator">...</span><span class="ruby-value">10</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
                }
        }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-place_army_top_right" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_army_top_right</span><span
            class="method-args">(entity_manager, army_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function places an army in the 5x5 top right corner</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">army_array</span>     = <span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">place</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>

<p>Postcondition</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">army</span> <span class="ruby-identifier">has</span> <span class="ruby-identifier">been</span> <span class="ruby-identifier">placed</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>
          
          

          
          <div class="method-source-code" id="place_army_top_right-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 372</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_army_top_right</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army_array</span>)
        <span class="ruby-identifier">army</span>    = <span class="ruby-identifier">army_array</span>.<span class="ruby-identifier">dup</span>
        <span class="ruby-identifier">max_col</span> = <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">col</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">5</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">max_col</span>.<span class="ruby-identifier">step</span>(<span class="ruby-identifier">max_col</span><span class="ruby-operator">-</span><span class="ruby-value">4</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">army</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
                }
        }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-place_piece" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">place_piece</span><span
            class="method-args">(entity_manager, piece, row, col)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function places a piece on the board</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
<span class="ruby-identifier">piece</span>          = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">place</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
<span class="ruby-identifier">row</span>            = <span class="ruby-identifier">the</span> <span class="ruby-identifier">row</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
<span class="ruby-identifier">col</span>            = <span class="ruby-identifier">the</span> <span class="ruby-identifier">col</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>

<p>Postcondition</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">piece</span> <span class="ruby-identifier">has</span> <span class="ruby-identifier">been</span> <span class="ruby-identifier">placed</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">board</span>
</pre>
          
          

          
          <div class="method-source-code" id="place_piece-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 313</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">place_piece</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">piece</span>, <span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>)
        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">add_component</span>(<span class="ruby-identifier">piece</span>,
                <span class="ruby-constant">PositionComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>, <span class="ruby-identifier">col</span>))
        <span class="ruby-identifier">entity_manager</span>.<span class="ruby-identifier">board</span>[<span class="ruby-identifier">row</span>][<span class="ruby-identifier">col</span>][<span class="ruby-value">1</span>].<span class="ruby-identifier">push</span> <span class="ruby-identifier">piece</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-river_square" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">river_square</span><span
            class="method-args">(entity_manager, id=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new river square for boards. Rivers are protective
barriers similar to mountains. Like mountains they can not be occupied by
troops. Unlike mountains, they can be traversed.</p>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Square</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="river_square-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">river_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>=<span class="ruby-value">0</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">TerrainComponent</span>.<span class="ruby-identifier">river</span>,
                                   <span class="ruby-constant">BoostComponent</span>.<span class="ruby-identifier">move_cost</span>,
                                   <span class="ruby-constant">SpriteComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-trench_square" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">trench_square</span><span
            class="method-args">(entity_manager, id=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new trench square for boards. Trenches are dug from
the terrain by units and are both passable and occupiable.</p>

<p>TODO Consider adding an immalleable component to determine if a square</p>

<pre class="ruby"><span class="ruby-identifier">can</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">turned</span> <span class="ruby-identifier">into</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">trench</span>
</pre>

<p>Arguments</p>

<pre class="ruby"><span class="ruby-identifier">entity_manager</span> = <span class="ruby-identifier">the</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">manager</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">new</span> <span class="ruby-identifier">entity</span> <span class="ruby-identifier">to</span>
</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Square</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="trench_square-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">trench_square</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">id</span>=<span class="ruby-value">0</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">TerrainComponent</span>.<span class="ruby-identifier">trench</span>,
                                   <span class="ruby-constant">OccupiableComponent</span>.<span class="ruby-identifier">new</span>,
                                   <span class="ruby-constant">BoostComponent</span>.<span class="ruby-identifier">defense</span>,
                                   <span class="ruby-constant">SpriteComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-turn_entity" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">turn_entity</span><span
            class="method-args">(entity_manager, players)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function creates a new turn entity. These entities are responsible for
managing information about the current turn of the game such as which
player&#39;s turn it currently is and what entities of the player have done
actions thus far.</p>

<p>Arguments</p>

<pre>entity_manager = the entity manager to add the new entity to
players        = a list of the game&#39;s player entities</pre>

<p>Returns</p>

<pre class="ruby"><span class="ruby-identifier">the</span> <span class="ruby-identifier">newly</span> <span class="ruby-identifier">created</span> <span class="ruby-constant">Turn</span> <span class="ruby-constant">Entity</span>
</pre>
          
          

          
          <div class="method-source-code" id="turn_entity-source">
            <pre><span class="ruby-comment"># File app/models/ecs/entity/entity_factory.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">turn_entity</span>(<span class="ruby-identifier">entity_manager</span>, <span class="ruby-identifier">players</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_entity</span>(<span class="ruby-identifier">entity_manager</span>,
                                  [<span class="ruby-constant">TurnComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">players</span>)])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

